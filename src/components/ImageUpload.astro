<div id="hs-file-upload">
  <template data-hs-file-upload-preview="">
    <div class="p-3 bg-white border border-solid border-gray-300 rounded-xl">
      <!-- Preview Template Content -->
    </div>
  </template>

  <div
    class="cursor-pointer flex justify-center group hover:bg-gray-200 bg-white border border-dashed border-gray-300 rounded-xl"
    data-hs-file-upload-trigger=""
  >
    <label
      for="file-upload"
      class="p-10 font-semibold w-full h-full text-blue-600 rounded-lg decoration-2 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-600 cursor-pointer"
    >
      <div class="text-center">
        <svg
          class="w-16 text-gray-400 mx-auto"
          width="70"
          height="46"
          viewBox="0 0 70 46"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M6.05172 9.36853L17.2131 7.5083V41.3608L12.3018 42.3947C9.01306 43.0871 5.79705 40.9434 5.17081 37.6414L1.14319 16.4049C0.515988 13.0978 2.73148 9.92191 6.05172 9.36853Z"
            fill="currentColor"
            stroke="currentColor"
            stroke-width="2"
            class="fill-white stroke-gray-400"></path>
          <path
            d="M63.9483 9.36853L52.7869 7.5083V41.3608L57.6982 42.3947C60.9869 43.0871 64.203 40.9434 64.8292 37.6414L68.8568 16.4049C69.484 13.0978 67.2685 9.92191 63.9483 9.36853Z"
            fill="currentColor"
            stroke="currentColor"
            stroke-width="2"
            class="fill-white stroke-gray-400"></path>
          <rect
            x="17.0656"
            y="1.62305"
            width="35.8689"
            height="42.7541"
            rx="5"
            fill="currentColor"
            stroke="currentColor"
            stroke-width="2"
            class="fill-white stroke-gray-400"></rect>
          <path
            d="M47.9344 44.3772H22.0655C19.3041 44.3772 17.0656 42.1386 17.0656 39.3772L17.0656 35.9161L29.4724 22.7682L38.9825 33.7121C39.7832 34.6335 41.2154 34.629 42.0102 33.7025L47.2456 27.5996L52.9344 33.7209V39.3772C52.9344 42.1386 50.6958 44.3772 47.9344 44.3772Z"
            stroke="currentColor"
            stroke-width="2"
            class="stroke-gray-400"></path>
          <circle
            cx="39.5902"
            cy="14.9672"
            r="4.16393"
            stroke="currentColor"
            stroke-width="2"
            class="stroke-gray-400"></circle>
        </svg>

        <div
          class="mt-4 flex flex-wrap justify-center text-sm leading-6 text-gray-600"
        >
          Select a Photo
        </div>

        <p class="mt-1 text-xs text-gray-400">
          Choose an image, preferably square .
        </p>
      </div>
    </label>
    <!-- Hidden File Input -->
    <input id="file-upload" type="file" accept="image/*" class="hidden" />
  </div>

  <div class="mt-4 space-y-3 empty:mt-0" data-hs-file-upload-previews="">
    <!-- Preview will be inserted here -->
  </div>

  <p id="no-image-error" class="text-sm text-red-500 hidden">
    Please upload a photo
  </p>
</div>

<script>
  const fileUploadElement = document.getElementById("file-upload");

  fileUploadElement?.addEventListener("change", (event) => {
    const files = (event.target as HTMLInputElement).files;
    const previewContainer = document.querySelector(
      "[data-hs-file-upload-previews]"
    ) as HTMLElement;

    if (files?.length && files[0] !== null) {
      const reader = new FileReader();
      reader.onloadend = () => {
        // Create an image element for the preview
        const img = document.createElement("img");
        img.src = reader.result as string;
        img.className = "w-[100px] h-[100px] object-cover rounded-lg"; // Add any desired styling
        previewContainer.innerHTML = ""; // Clear previous previews
        previewContainer.appendChild(img); // Add the new preview

        // Dispatch a custom event with the uploaded image data
        const imageUploadedEvent = new CustomEvent("imageUploaded", {
          detail: { photo: reader.result }, // Pass the image data
        });
        document.dispatchEvent(imageUploadedEvent);
      };
      reader.readAsDataURL(files[0]);
    }
  });
</script>
